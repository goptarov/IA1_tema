{% extends "_layout.html" %}
{% block title %}Checkout · Sweet Moments{% endblock %}

{% block content %}
  <div class="container">
    <section class="checkout-page">
      <h2 class="section-title">Checkout</h2>

      <div class="checkout-card">
        {% if error %}
          <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <form method="post" class="checkout-form" novalidate>
          <div class="form-grid">
            <div class="form-group">
              <label>Full Name</label>
              <input type="text" name="full_name" value="{{ form.full_name or '' }}" required>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" name="email" value="{{ form.email or '' }}" required>
            </div>
            <div class="form-group full-width">
              <label>Street Address</label>
              <input type="text" name="address" value="{{ form.address or '' }}" required>
            </div>
            <div class="form-group">
              <label>City</label>
              <input type="text" name="city" value="{{ form.city or '' }}" required>
            </div>
            <div class="form-group">
              <label>ZIP Code</label>
              <input type="text" name="zip_code" value="{{ form.zip_code or '' }}" required>
            </div>
          </div>

          <h3 class="section-subtitle">Order Summary</h3>
          <ul class="order-summary">
            {% for line in items %}
            <li>
              <span>{{ line.product.name }} × {{ line.quantity }}</span>
              <span>€{{ "%.2f"|format(line.subtotal) }}</span>
            </li>
            {% endfor %}
            <li class="summary-total">
              <strong>Total</strong>
              <strong>€{{ "%.2f"|format(total) }}</strong>
            </li>
          </ul>

          <button type="submit" class="btn btn-primary btn-lg w-full">
            Place Order
          </button>
        </form>
      </div>
    </section>
  </div>
{% endblock %}
